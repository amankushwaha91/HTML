<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday Surprise — Vanilla Cake</title>
<style>
  /* Reset & root */
  html,body{height:100%;margin:0;font-family: 'Poppins', system-ui, sans-serif;overflow:hidden;}
  :root{
    --red:#b31217;
    --gold:#FFD700;
    --cream:#fff7ee;
    --icing:#ffdfe6;
    --sprinkle-a:#ff6b6b;
    --sprinkle-b:#6be0ff;
    --sprinkle-c:#ffd166;
    --sprinkle-d:#7ef57e;
  }

  /* INITIAL RED SCREEN */
  body.initial-red {
    background: linear-gradient(180deg,var(--red), #7a0b10);
    display:flex;align-items:center;justify-content:center;flex-direction:column;color:white;
    transition: background 800ms ease-in-out;
  }

  /* AFTER OPEN: show uploaded image */
  body.image-bg {
    background-image: url("/mnt/data/Screenshot 2025-11-24 123525.png");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }

  /* First-page message (custom) */
  .top-instruction {
    position: fixed;
    top: 22px;
    left: 0; right: 0;
    text-align: center;
    font-size: 20px;
    font-weight: 700;
    color: var(--gold);
    text-shadow: 0 4px 18px rgba(0,0,0,0.45);
    z-index: 60;
    pointer-events: none;
    width: 90%;
    line-height:1.2;
  }

  /* Scene */
  #scene { position: relative; width:100vw; height:100vh; display:flex; align-items:center; justify-content:center; }

  /* Surprise box */
  #box { width:220px; height:170px; position:relative; cursor:pointer; z-index:40; transform-style:preserve-3d; transition: transform 420ms; }
  #box .lid, #box .base, #box .ribbon { position:absolute; left:0; right:0; margin:auto; box-sizing:border-box; }
  #box .lid { width:112%; height:52%; top:-8px; left:-6%; background: linear-gradient(180deg,#ff5b5b,#b71c1c); border-radius:12px; transform-origin:center bottom; z-index:43; box-shadow:0 10px 24px rgba(0,0,0,0.45); }
  #box .base { width:100%; height:72%; bottom:0; background: linear-gradient(180deg,#c62828,#8e0000); border-radius:12px; z-index:42; box-shadow:0 12px 32px rgba(0,0,0,0.5); }
  #box .ribbon { width:22px; height:78%; top:36%; left:50%; transform:translateX(-50%); background:gold; border-radius:4px; z-index:44; box-shadow:0 2px 6px rgba(0,0,0,0.3); }

  /* OPEN (explosion) */
  #box.open { pointer-events:none; }
  #box.open .lid { transform: translate(-60px,-140px) rotate(-25deg) scale(.6); opacity:0; transition:all 700ms cubic-bezier(.2,.9,.2,1); }
  #box.open .base{ transform: translate(80px,140px) rotate(20deg) scale(.6); opacity:0; transition:all 700ms cubic-bezier(.2,.9,.2,1); }
  #box.open .ribbon{ transform: translateY(-200px) rotate(45deg) scale(.5); opacity:0; transition:all 700ms cubic-bezier(.2,.9,.2,1); }

  /* Cake (vanilla round with icing & sprinkles) */
  #cake {
    width: 280px;
    height: 180px;
    border-radius: 160px / 120px;
    background: linear-gradient(180deg, var(--cream) 0%, #fffaf0 60%);
    position: absolute;
    left: 50%;
    transform: translateX(-50%) translateY(80px) scale(.6);
    bottom: 22%;
    opacity: 0;
    z-index: 35;
    display:flex;align-items:center;justify-content:center;
    box-shadow: 0 18px 36px rgba(0,0,0,0.35), inset 0 -6px 12px rgba(0,0,0,0.03);
    transition: transform 900ms cubic-bezier(.2,.9,.2,1), opacity 600ms ease-in-out;
  }
  /* visible when background switched */
  body.image-bg #cake { transform: translateX(-50%) translateY(0) scale(1); opacity: 1; transition-delay: 360ms; }

  /* Icing layer */
  #cake .icing {
    position:absolute; top: -14px; left: 0; right:0; margin:auto;
    width: 92%; height: 70px; border-radius: 50%;
    background: linear-gradient(180deg, var(--icing), #ffd4e0);
    box-shadow: 0 6px 10px rgba(255,200,220,0.5);
    overflow: hidden;
  }
  /* Icing drip shapes (decorative) */
  #cake .drip { position:absolute; bottom:0; width:18%; height:36px; background: rgba(255,240,245,0.98); border-radius: 0 0 18px 18px; left:6%; transform: translateY(18px); opacity:0.9;}
  #cake .drip.d2{ left:28%; height:46px; width:14%; transform: translateY(8px); }
  #cake .drip.d3{ left:50%; height:38px; width:16%; transform: translateY(16px); }
  #cake .drip.d4{ left:72%; height:44px; width:13%; transform: translateY(10px); }

  /* Cake plate */
  #cake .plate {
    position:absolute; bottom:-18px; left:50%; transform:translateX(-50%);
    width:360px; height:44px; background: linear-gradient(180deg,#f7f7f7,#e6e6e6);
    border-radius:40px; box-shadow:0 8px 24px rgba(0,0,0,0.25); z-index:30;
  }

  /* Sprinkles */
  .sprinkle {
    position:absolute; width:8px; height:4px; border-radius:4px; transform: rotate(-20deg); opacity:0.95;
    box-shadow: 0 1px 0 rgba(0,0,0,0.12);
  }
  /* various positions */
  .s1{ left:34%; top:28%; background:var(--sprinkle-a); transform: rotate(-15deg) scale(1.1); }
  .s2{ left:46%; top:22%; background:var(--sprinkle-b); transform: rotate(10deg); }
  .s3{ left:58%; top:30%; background:var(--sprinkle-c); transform: rotate(-30deg) scale(.9); }
  .s4{ left:42%; top:40%; background:var(--sprinkle-d); transform: rotate(20deg) scale(.85); }
  .s5{ left:28%; top:34%; background:var(--sprinkle-b); transform: rotate(45deg) scale(.9); }
  .s6{ left:70%; top:36%; background:var(--sprinkle-a); transform: rotate(-5deg) scale(1.05); }
  .s7{ left:50%; top:12%; background:var(--sprinkle-d); transform: rotate(5deg) scale(.9); }
  .s8{ left:60%; top:18%; background:var(--sprinkle-a); transform: rotate(-40deg) scale(.9); }
  .s9{ left:36%; top:18%; background:var(--sprinkle-c); transform: rotate(25deg) scale(.85); }
  .s10{ left:48%; top:36%; background:var(--sprinkle-b); transform: rotate(70deg) scale(.9); }

  /* Candle */
  .candle {
    position:absolute; top:-56px; left:50%; transform:translateX(-50%); width:12px; height:44px; background: #fff;
    border-radius:4px; z-index:60; box-shadow:0 0 6px rgba(255,255,255,0.9), inset 0 -4px 6px rgba(0,0,0,0.06);
  }
  .candle:after{ content:''; position:absolute; left:50%; top:4px; transform:translateX(-50%); width:6px; height:28px; background:linear-gradient(180deg,#ffd6d6,#ffa8a8); border-radius:2px; }

  .flame {
    position:absolute; left:50%; top:-76px; transform:translateX(-50%);
    width:14px; height:22px; border-radius:50% 50% 50% 50%;
    background: radial-gradient(circle at 40% 30%, #fff0 0%, yellow 30%, orange 60%, red 100%);
    box-shadow:0 0 10px yellow, 0 0 22px orange; animation: flicker 0.18s infinite alternate;
  }
  @keyframes flicker { from{ transform:translateX(-50%) scaleY(1); opacity:1 } to{ transform:translateX(-50%) scaleY(.88); opacity:.85 } }

  /* Birthday top text */
  #birthdayText {
    position: fixed; left:50%; top:6vh; transform:translateX(-50%) translateY(-20px);
    font-size:34px; font-weight:900; letter-spacing:2px; color:#fff; text-align:center; z-index:60;
    opacity:0; transition: all 900ms cubic-bezier(.2,.9,.2,1);
    text-shadow: 0 6px 20px rgba(0,0,0,0.6), 0 0 18px rgba(255,105,180,0.18);
  }
  body.image-bg #birthdayText { opacity:1; transform:translateX(-50%) translateY(0); transition-delay: 700ms; }

  /* Fireworks canvas & confetti */
  #fireworks { position: fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; z-index:20; }
  #confetti-container { position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; z-index:18; opacity:0; transition:opacity 700ms ease-in-out; }
  #confetti-container.visible { opacity:1; }

  /* responsive */
  @media(max-width:600px){
    .top-instruction{font-size:18px;padding:0 8px;}
    #birthdayText{font-size:22px;top:4vh;}
    #cake{width:220px;height:140px;bottom:20%;}
    #box{width:160px;height:120px;}
  }
</style>
</head>
<body class="initial-red">

  <!-- FIRST PAGE MESSAGE -->
  <div class="top-instruction">
    You’re not just special… you’re unforgettable.<br>
    Wishing you the most magical birthday ever.
  </div>

  <div id="scene" aria-live="polite">
    <!-- Surprise box (center) -->
    <div id="box" title="Open the surprise box" role="button" aria-label="Open surprise box" tabindex="0">
      <div class="lid"></div>
      <div class="base"></div>
      <div class="ribbon"></div>
    </div>

    <!-- Cake (vanilla round) -->
    <div id="cake" aria-hidden="true">
      <div class="icing">
        <div class="drip"></div>
        <div class="drip d2"></div>
        <div class="drip d3"></div>
        <div class="drip d4"></div>
      </div>

      <!-- sprinkles -->
      <div class="sprinkle s1"></div>
      <div class="sprinkle s2"></div>
      <div class="sprinkle s3"></div>
      <div class="sprinkle s4"></div>
      <div class="sprinkle s5"></div>
      <div class="sprinkle s6"></div>
      <div class="sprinkle s7"></div>
      <div class="sprinkle s8"></div>
      <div class="sprinkle s9"></div>
      <div class="sprinkle s10"></div>

      <!-- candle & flame -->
      <div class="candle" aria-hidden="true"></div>
      <div class="flame" aria-hidden="true"></div>

      <!-- plate -->
      <div class="plate" aria-hidden="true"></div>
    </div>

    <!-- confetti and fireworks -->
    <div id="confetti-container" aria-hidden="true"></div>
    <canvas id="fireworks" aria-hidden="true"></canvas>
  </div>

  <!-- TOP TEXT (after open) -->
  <div id="birthdayText" aria-hidden="true">HAPPY BIRTHDAY SAMIKSHA</div>

<script>
/* ---------------- Setup ---------------- */
const box = document.getElementById('box');
const cake = document.getElementById('cake');
const confettiContainer = document.getElementById('confetti-container');
const canvas = document.getElementById('fireworks');
const ctx = canvas.getContext('2d');
const birthdayText = document.getElementById('birthdayText');

let particles = [];
let fireworksActive = false;
const CONFETTI_COLORS = ['#ff6b6b','#6be0ff','#ffd166','#7ef57e','#ff69b4','#ffd700'];

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

/* ---------------- Open flow ---------------- */
function openSurprise(){
  if (box.classList.contains('open')) return;
  box.classList.add('open');

  // small delay then switch backgrounds and reveal cake/text
  setTimeout(() => {
    document.body.classList.remove('initial-red');
    document.body.classList.add('image-bg');

    // show confetti and fireworks
    confettiContainer.classList.add('visible');
    spawnConfetti(120);
    fireworksActive = true;
    animateFireworks();

    // reveal cake and text are controlled by CSS via .image-bg
    birthdayText.setAttribute('aria-hidden','false');
    cake.setAttribute('aria-hidden','false');
  }, 380);

  // fade out the initial message
  const instr = document.querySelector('.top-instruction');
  if (instr) instr.style.opacity = 0;

  // hint scale
  document.getElementById('scene').style.transform = 'scale(1.02)';
  setTimeout(()=>{ document.getElementById('scene').style.transform = ''; }, 1100);
}

/* allow click / keyboard */
box.addEventListener('click', openSurprise);
box.addEventListener('keydown', (e) => {
  if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openSurprise(); }
});

/* ---------------- Fireworks ---------------- */
class Particle {
  constructor(x,y,dx,dy,life,color,size){
    this.x=x; this.y=y; this.dx=dx; this.dy=dy; this.life=life; this.age=0; this.color=color; this.size=size||2.5;
  }
  update(dt){
    this.x += this.dx*dt;
    this.y += this.dy*dt;
    this.dy += 80*dt; // gravity
    this.age += dt;
  }
  draw(ctx){
    const alpha = Math.max(0,1 - this.age/this.life);
    ctx.globalAlpha = alpha;
    ctx.beginPath();
    ctx.fillStyle = this.color;
    ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
    ctx.fill();
  }
}

function spawnFirework(){
  const x = Math.random() * canvas.width;
  const y = Math.random() * canvas.height * 0.6 + 60;
  const count = 50 + Math.floor(Math.random()*80);
  const hue = Math.floor(Math.random()*360);
  for (let i=0;i<count;i++){
    const a = Math.random()*Math.PI*2;
    const s = 80 + Math.random()*240;
    const dx = Math.cos(a)*s;
    const dy = Math.sin(a)*s;
    const life = 1.1 + Math.random()*1.6;
    const col = `hsl(${hue + Math.floor(Math.random()*30)-15}deg,85%,60%)`;
    const size = 1 + Math.random()*3;
    particles.push(new Particle(x,y,dx,dy,life,col,size));
  }
}

let last = performance.now()/1000;
const FIREWORK_RATE = 0.13;

function animateFireworks(){
  const now = performance.now()/1000;
  const dt = Math.min(0.06, now - last);
  last = now;

  // trail effect
  ctx.fillStyle = "rgba(0,0,0,0.12)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  if (fireworksActive && Math.random() < FIREWORK_RATE) spawnFirework();

  particles.forEach(p => { p.update(dt); p.draw(ctx); });
  particles = particles.filter(p => p.age < p.life);

  if (fireworksActive || particles.length) requestAnimationFrame(animateFireworks);
}

/* ---------------- Confetti ---------------- */
function spawnConfetti(count){
  for (let i=0;i<count;i++){
    const el = document.createElement('div');
    el.className = 'confetti';
    const size = 6 + Math.random()*12;
    const left = Math.random()*100;
    const duration = 8 + Math.random()*12;
    const color = CONFETTI_COLORS[Math.floor(Math.random()*CONFETTI_COLORS.length)];
    el.style.width = `${size}px`;
    el.style.height = `${size}px`;
    el.style.left = `${left}vw`;
    el.style.top = `${-Math.random()*20 - 5}vh`;
    el.style.background = color;
    el.style.position = 'absolute';
    el.style.borderRadius = Math.random()>.5 ? '2px' : '50%';
    el.style.opacity = '0.95';
    el.style.transform = `rotate(${Math.random()*360}deg)`;
    el.style.animation = `confettiFall ${duration}s linear forwards`;
    confettiContainer.appendChild(el);

    // animate removal with CSS keyframes (created inline below)
    setTimeout(()=>{ if (el.parentNode) el.parentNode.removeChild(el); }, (duration+1)*1000);
  }
}

/* create small keyframe style for confetti */
const styleSheet = document.createElement('style');
styleSheet.innerHTML = `
@keyframes confettiFall {
  0% { transform: translateY(-10vh) rotate(0deg); opacity:1; }
  100% { transform: translateY(110vh) rotate(720deg); opacity:0.9; }
}
`;
document.head.appendChild(styleSheet);

/* start an ambient confetti on load */
spawnConfetti(30);
confettiContainer.style.opacity = '0.18';
setTimeout(()=>{ confettiContainer.style.opacity = '0.18'; }, 600);

/* ---------------- Accessibility hint & pulse ---------------- */
box.animate([{ transform: 'translateY(0px)' }, { transform: 'translateY(-8px)' }, { transform: 'translateY(0px)' }], {
  duration: 900, iterations: 1, easing: 'cubic-bezier(.2,.8,.2,1)'
});

</script>
</body>
</html>
